/*! For license information please see bundle.js.LICENSE.txt */
(()=>{"use strict";function t(e){return t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},t(e)}function e(t,e){for(var r=0;r<e.length;r++){var o=e[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,n(o.key),o)}}function n(e){var n=function(e,n){if("object"!=t(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,n||"default");if("object"!=t(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===n?String:Number)(e)}(e,"string");return"symbol"==t(n)?n:n+""}var r=function(){return t=function t(e){var n=e.id,r=e.name,o=e.description,c=e.status;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.id=n,this.name=r,this.description=o,this.status=c},(n=[{key:"render",value:function(){var t=document.createElement("div");t.className="ticket",this.status&&t.classList.add("done");var e=document.createElement("input");e.type="checkbox",e.className="done-checkbox",e.checked=this.status;var n=document.createElement("div");n.className="ticket-body",n.textContent=this.name;var r=document.createElement("button");r.className="edit",r.textContent="✎";var o=document.createElement("button");return o.className="delete",o.textContent="x",t.append(e,n,r,o),t}}])&&e(t.prototype,n),r&&e(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,n,r}();function o(t){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o(t)}function c(){var t,e,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function a(n,r,o,c){var a=r&&r.prototype instanceof f?r:f,s=Object.create(a.prototype);return i(s,"_invoke",function(n,r,o){var c,i,a,f=0,s=o||[],l=!1,p={p:0,n:0,v:t,a:d,f:d.bind(t,4),d:function(e,n){return c=e,i=0,a=t,p.n=n,u}};function d(n,r){for(i=n,a=r,e=0;!l&&f&&!o&&e<s.length;e++){var o,c=s[e],d=p.p,v=c[2];n>3?(o=v===r)&&(a=c[(i=c[4])?5:(i=3,3)],c[4]=c[5]=t):c[0]<=d&&((o=n<2&&d<c[1])?(i=0,p.v=r,p.n=c[1]):d<v&&(o=n<3||c[0]>r||r>v)&&(c[4]=n,c[5]=r,p.n=v,i=0))}if(o||n>1)return u;throw l=!0,r}return function(o,s,v){if(f>1)throw TypeError("Generator is already running");for(l&&1===s&&d(s,v),i=s,a=v;(e=i<2?t:a)||!l;){c||(i?i<3?(i>1&&(p.n=-1),d(i,a)):p.n=a:p.v=a);try{if(f=2,c){if(i||(o="next"),e=c[o]){if(!(e=e.call(c,a)))throw TypeError("iterator result is not an object");if(!e.done)return e;a=e.value,i<2&&(i=0)}else 1===i&&(e=c.return)&&e.call(c),i<2&&(a=TypeError("The iterator does not provide a '"+o+"' method"),i=1);c=t}else if((e=(l=p.n<0)?a:n.call(r,p))!==u)break}catch(e){c=t,i=1,a=e}finally{f=1}}return{value:e,done:l}}}(n,o,c),!0),s}var u={};function f(){}function s(){}function l(){}e=Object.getPrototypeOf;var p=[][r]?e(e([][r]())):(i(e={},r,function(){return this}),e),d=l.prototype=f.prototype=Object.create(p);function v(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,l):(t.__proto__=l,i(t,o,"GeneratorFunction")),t.prototype=Object.create(d),t}return s.prototype=l,i(d,"constructor",l),i(l,"constructor",s),s.displayName="GeneratorFunction",i(l,o,"GeneratorFunction"),i(d),i(d,o,"Generator"),i(d,r,function(){return this}),i(d,"toString",function(){return"[object Generator]"}),(c=function(){return{w:a,m:v}})()}function i(t,e,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}i=function(t,e,n,r){function c(e,n){i(t,e,function(t){return this._invoke(e,n,t)})}e?o?o(t,e,{value:n,enumerable:!r,configurable:!r,writable:!r}):t[e]=n:(c("next",0),c("throw",1),c("return",2))},i(t,e,n,r)}function a(t,e,n,r,o,c,i){try{var a=t[c](i),u=a.value}catch(t){return void n(t)}a.done?e(u):Promise.resolve(u).then(r,o)}function u(t){return function(){var e=this,n=arguments;return new Promise(function(r,o){var c=t.apply(e,n);function i(t){a(c,r,o,i,u,"next",t)}function u(t){a(c,r,o,i,u,"throw",t)}i(void 0)})}}function f(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,s(r.key),r)}}function s(t){var e=function(t,e){if("object"!=o(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=o(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==o(e)?e:e+""}var l="http://localhost:7070",p=function(){return t=function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)},e=null,n=[{key:"getTickets",value:(a=u(c().m(function t(){var e;return c().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,fetch("".concat(l,"?method=allTickets"));case 1:if((e=t.v).ok){t.n=2;break}throw new Error("Ошибка при загрузке тикетов");case 2:return t.a(2,e.json())}},t)})),function(){return a.apply(this,arguments)})},{key:"createTicket",value:(i=u(c().m(function t(e){var n;return c().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,fetch("".concat(l,"?method=createTicket"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});case 1:if((n=t.v).ok){t.n=2;break}throw new Error("Ошибка при создании тикета");case 2:return t.a(2,n.json())}},t)})),function(t){return i.apply(this,arguments)})},{key:"updateTicket",value:(o=u(c().m(function t(e,n){var r;return c().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,fetch("".concat(l,"?method=updateById&id=").concat(e),{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)});case 1:if((r=t.v).ok){t.n=2;break}throw new Error("Ошибка при обновлении тикета");case 2:return t.a(2,r.json())}},t)})),function(t,e){return o.apply(this,arguments)})},{key:"deleteTicket",value:(r=u(c().m(function t(e){var n;return c().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,fetch("".concat(l,"?method=deleteById&id=").concat(e),{method:"DELETE"});case 1:if((n=t.v).ok){t.n=2;break}throw new Error("Ошибка при удалении тикета");case 2:return t.a(2,n.json())}},t)})),function(t){return r.apply(this,arguments)})}],e&&f(t.prototype,e),n&&f(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,n,r,o,i,a}();function d(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=document.createElement("div");e.className="modal";var n=document.createElement("div");n.className="modal-content";var r=document.createElement("input");r.placeholder="Заголовок",r.value=t?t.name:"";var o=document.createElement("textarea");o.placeholder="Описание",o.value=t?t.description:"";var c=document.createElement("button");c.textContent="Сохранить";var i=document.createElement("button");function a(){e.remove()}i.textContent="Отмена",i.addEventListener("click",function(){return a()}),n.append(r,o,c,i),e.append(n),c.addEventListener("click",function(){u&&u({name:r.value,description:o.value,status:!!t&&t.status})});var u=null;return{open:function(){document.body.append(e)},close:a,set onSubmit(t){u=t}}}function v(){var t,e,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function c(n,r,o,c){var u=r&&r.prototype instanceof a?r:a,f=Object.create(u.prototype);return y(f,"_invoke",function(n,r,o){var c,a,u,f=0,s=o||[],l=!1,p={p:0,n:0,v:t,a:d,f:d.bind(t,4),d:function(e,n){return c=e,a=0,u=t,p.n=n,i}};function d(n,r){for(a=n,u=r,e=0;!l&&f&&!o&&e<s.length;e++){var o,c=s[e],d=p.p,v=c[2];n>3?(o=v===r)&&(u=c[(a=c[4])?5:(a=3,3)],c[4]=c[5]=t):c[0]<=d&&((o=n<2&&d<c[1])?(a=0,p.v=r,p.n=c[1]):d<v&&(o=n<3||c[0]>r||r>v)&&(c[4]=n,c[5]=r,p.n=v,a=0))}if(o||n>1)return i;throw l=!0,r}return function(o,s,v){if(f>1)throw TypeError("Generator is already running");for(l&&1===s&&d(s,v),a=s,u=v;(e=a<2?t:u)||!l;){c||(a?a<3?(a>1&&(p.n=-1),d(a,u)):p.n=u:p.v=u);try{if(f=2,c){if(a||(o="next"),e=c[o]){if(!(e=e.call(c,u)))throw TypeError("iterator result is not an object");if(!e.done)return e;u=e.value,a<2&&(a=0)}else 1===a&&(e=c.return)&&e.call(c),a<2&&(u=TypeError("The iterator does not provide a '"+o+"' method"),a=1);c=t}else if((e=(l=p.n<0)?u:n.call(r,p))!==i)break}catch(e){c=t,a=1,u=e}finally{f=1}}return{value:e,done:l}}}(n,o,c),!0),f}var i={};function a(){}function u(){}function f(){}e=Object.getPrototypeOf;var s=[][r]?e(e([][r]())):(y(e={},r,function(){return this}),e),l=f.prototype=a.prototype=Object.create(s);function p(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,f):(t.__proto__=f,y(t,o,"GeneratorFunction")),t.prototype=Object.create(l),t}return u.prototype=f,y(l,"constructor",f),y(f,"constructor",u),u.displayName="GeneratorFunction",y(f,o,"GeneratorFunction"),y(l),y(l,o,"Generator"),y(l,r,function(){return this}),y(l,"toString",function(){return"[object Generator]"}),(v=function(){return{w:c,m:p}})()}function y(t,e,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}y=function(t,e,n,r){function c(e,n){y(t,e,function(t){return this._invoke(e,n,t)})}e?o?o(t,e,{value:n,enumerable:!r,configurable:!r,writable:!r}):t[e]=n:(c("next",0),c("throw",1),c("return",2))},y(t,e,n,r)}function m(t,e,n,r,o,c,i){try{var a=t[c](i),u=a.value}catch(t){return void n(t)}a.done?e(u):Promise.resolve(u).then(r,o)}function h(t){return function(){var e=this,n=arguments;return new Promise(function(r,o){var c=t.apply(e,n);function i(t){m(c,r,o,i,a,"next",t)}function a(t){m(c,r,o,i,a,"throw",t)}i(void 0)})}}document.getElementById("root").replaceChildren(function(){var t=document.createElement("div"),e=document.createElement("button");e.textContent="Добавить тикет",e.className="add-ticket-button",e.addEventListener("click",function(){return i()}),t.append(e);var n=document.createElement("div");function o(){return c.apply(this,arguments)}function c(){return c=h(v().m(function t(){var e;return v().w(function(t){for(;;)switch(t.p=t.n){case 0:return n.replaceChildren(),t.p=1,t.n=2,p.getTickets();case 2:t.v.forEach(function(t){var e=new r(t),c=e.render();c.querySelector(".delete").addEventListener("click",function(){var t=h(v().m(function t(n){return v().w(function(t){for(;;)switch(t.n){case 0:return n.stopPropagation(),t.n=1,p.deleteTicket(e.id);case 1:o();case 2:return t.a(2)}},t)}));return function(e){return t.apply(this,arguments)}}()),c.querySelector(".edit").addEventListener("click",function(){var e=h(v().m(function e(n){return v().w(function(e){for(;;)switch(e.n){case 0:n.stopPropagation(),i(t);case 1:return e.a(2)}},e)}));return function(t){return e.apply(this,arguments)}}()),c.querySelector(".done-checkbox").addEventListener("change",function(){var t=h(v().m(function t(n){return v().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,p.updateTicket(e.id,{status:n.target.checked});case 1:o();case 2:return t.a(2)}},t)}));return function(e){return t.apply(this,arguments)}}()),c.querySelector(".ticket-body").addEventListener("click",function(){alert("Детали тикета:\n".concat(e.name,"\n").concat(e.description))}),n.append(c)}),t.n=4;break;case 3:t.p=3,e=t.v,console.error(e);case 4:return t.a(2)}},t,null,[[1,3]])})),c.apply(this,arguments)}function i(){return a.apply(this,arguments)}function a(){return a=h(v().m(function t(){var e,n,r=arguments;return v().w(function(t){for(;;)switch(t.n){case 0:(n=d(e=r.length>0&&void 0!==r[0]?r[0]:null)).onSubmit=function(){var t=h(v().m(function t(r){return v().w(function(t){for(;;)switch(t.n){case 0:if(!e){t.n=2;break}return t.n=1,p.updateTicket(e.id,r);case 1:t.n=3;break;case 2:return t.n=3,p.createTicket(r);case 3:o(),n.close();case 4:return t.a(2)}},t)}));return function(e){return t.apply(this,arguments)}}(),n.open();case 1:return t.a(2)}},t)})),a.apply(this,arguments)}return n.id="tickets-container",t.append(n),o(),t}())})();